# Анализ и план реализации Frontend для Образовательного Портала

## 1. Текущее состояние проекта

Проект `frontend` представляет собой активно разрабатываемый клиент на Next.js с использованием App Router. Он спроектирован с четким разделением логики и представления, что соответствует современным практикам разработки.

**Что уже есть:**
- **Основа Next.js:** Настроен проект с App Router, TypeScript и Tailwind CSS.
- **Архитектура:** Применяется модульный подход с разделением на `app` (страницы), `components` (переиспользуемые компоненты), `api` (взаимодействие с бэкендом), `hooks` и `lib`.
- **Компонентный подход:** Логика страниц вынесена в отдельные компоненты. Например, страница входа (`app/auth/login/page.tsx`) использует компонент `components/auth/login-form.tsx`.
- **UI-кит:** Используются базовые UI-компоненты (`Button`, `Input`, `Form`), что говорит о наличии основ для дизайн-системы (похоже на `shadcn/ui`).
- **API-слой:** Настроена работа с API через `axios`, включая `instance` для защищенных запросов с автоматическим обновлением токена. Созданы хуки `react-query` для аутентификации (`useLoginMutation`, `useRegisterMutation`).
- **Аутентификация:** Реализованы страницы входа и регистрации, а также `middleware` для защиты маршрутов.

**Чего не хватает:**
- **Основные разделы:** Отсутствуют страницы для курсов, уроков, дашборда пользователя и админ-панели.
- **Управление состоянием:** Кроме `react-query` для серверного состояния, не внедрен инструмент для глобального клиентского состояния (например, `Zustand` или `Jotai`).
- **Полный набор UI-компонентов:** Необходимо расширить UI-кит для более сложных элементов (модальные окна, таблицы, нотификации).
- **Тестирование:** Отсутствуют юнит- и e2e-тесты.

---

## 2. План реализации на основе текущей структуры

Ниже представлена предлагаемая файловая структура, которая расширяет текущую архитектуру и учитывает будущие задачи.

### 2.1. Предлагаемая файловая структура
```
frontend/
├── src/
│   ├── app/                          # Маршруты приложения (App Router)
│   │   ├── (auth)/                   # Группа для аутентификации
│   │   │   ├── login/
│   │   │   │   └── page.tsx
│   │   │   ├── register/
│   │   │   │   └── page.tsx
│   │   │   └── layout.tsx
│   │   │
│   │   ├── (main)/                   # Основная часть приложения для авторизованных пользователей
│   │   │   ├── dashboard/            # Личный кабинет
│   │   │   │   └── page.tsx
│   │   │   ├── subjects/             # Страница с предметами (курсами)
│   │   │   │   ├── page.tsx
│   │   │   │   └── [subjectId]/
│   │   │   │       ├── page.tsx      # Страница конкретного предмета с темами
│   │   │   │       └── topics/
│   │   │   │           └── [topicId]/
│   │   │   │               └── page.tsx # Страница темы с уроками
│   │   │   ├── lessons/              # Страница урока
│   │   │   │   └── [lessonId]/
│   │   │   │       └── page.tsx
│   │   │   ├── profile/              # Настройки профиля
│   │   │   │   └── page.tsx
│   │   │   └── layout.tsx            # Основной лейаут с навигацией
│   │   │
│   │   ├── layout.tsx                # Корневой лейаут
│   │   ├── page.tsx                  # Главная (лендинг)
│   │   └── providers.tsx             # Провайдеры (React Query, Theme, etc.)
│   │
│   ├── components/                   # Переиспользуемые компоненты
│   │   ├── auth/                     # Компоненты для аутентификации
│   │   │   ├── auth-wrapper.tsx
│   │   │   ├── login-form.tsx
│   │   │   └── register-form.tsx
│   │   ├── dashboard/                # Компоненты для личного кабинета
│   │   ├── subjects/                 # Компоненты для предметов и тем
│   │   ├── lessons/                  # Компоненты для уроков
│   │   ├── layout/                   # Компоненты макета (header, sidebar, footer)
│   │   │   └── site-header.tsx
│   │   └── ui/                       # Базовые UI-компоненты (кнопки, инпуты, карточки)
│   │
│   ├── api/                          # Слой для работы с API
│   │   ├── hooks/                    # Кастомные хуки React Query
│   │   ├── requests/                 # Функции для выполнения запросов
│   │   ├── types/                    # Типы данных API
│   │   ├── client.ts                 # Публичный инстанс Axios
│   │   └── instance.ts               # Защищенный инстанс Axios с интерсепторами
│   │
│   ├── hooks/                        # Глобальные кастомные хуки
│   │   └── useAuth.ts
│   │
│   ├── lib/                          # Вспомогательные утилиты и константы
│   │   ├── cookies.ts
│   │   ├── utils.ts
│   │   └── constants.ts
│   │
│   ├── store/                        # Глобальное хранилище (Zustand)
│   │   └── auth.store.ts
│   │
│   └── middleware.ts                 # Middleware для проверки авторизации
│
└── tailwind.config.ts
└── tsconfig.json
```

### 2.2. Задачи по модулям

#### **Шаг 1: Аутентификация и базовый макет**
- [x] **Задача:** Создать страницы входа и регистрации.
- [x] **Задача:** Реализовать `AuthWrapper` для обертки форм.
- [x] **Задача:** Настроить `middleware` для защиты роутов.
- [x] **Задача:** Создать `site-header` с условным отображением кнопок "Войти" / "Личный кабинет".

#### **Шаг 2: Создание главной страницы (Страница с предметами)**
- **Задача:** Создать страницу `app/(main)/subjects/page.tsx` для отображения всех доступных курсов.
- **API:** Создать хук `useGetSubjectsQuery` для получения списка предметов с бэкенда.
- **Компоненты:** Разработать компоненты `SubjectCard` и `SubjectList` для отображения курсов в виде сетки.
- **Навигация:** Настроить `middleware` для перенаправления на `/subjects` после успешного входа.

#### **Шаг 3: Личный кабинет (Dashboard)**
-   **Задача:** Создать страницу `app/(main)/dashboard/page.tsx`, которая будет являться пользовательским профилем.
-   **Макет:** Реализовать двухколоночный макет со статичным сайдбаром (темно-фиолетовый фон) и основной областью контента (светло-серый фон) согласно `dashboard.png`.
-   **Сайдбар:**
    *   Добавить название платформы и навигационные ссылки: "Дашборд", "Курсы", "Профиль".
    *   **Условие:** Ссылка "Админка" должна быть скрыта для обычных пользователей. Для определения роли пользователя использовать данные из `useGetProfileQuery`.
    *   Включить в сайдбар информацию об авторских правах внизу.
-   **Header (основная область контента):** Реализовать верхнюю панель с поисковой строкой, иконками уведомлений и переключения темы, а также аватаром/именем пользователя.
-   **Компоненты страницы профиля:**
    *   **ProfileSummaryCard:** Отображение аватара, имени, роли ("Студент"), email и кнопки "Редактировать профиль".
    *   **StatsGrid:** Секция из четырех карточек статистики: "Курсов пройдено", "Текущий прогресс", "Очки опыта", "Часов обучения".
    *   **PersonalDataForm:** Форма для отображения и редактирования личных данных (Имя, Фамилия, Email, Номер телефона, Дата рождения, Город).
    *   **SecuritySettings:** Секция с настройками безопасности, включая чекбоксы ("Получать уведомления", "Получать напоминания", "Показывать мой прогресс") и ссылки ("Изменить пароль", "Удалить аккаунт").
-   **API:** Интегрировать `useGetProfileQuery` для получения данных пользователя и другие необходимые мутации/запросы для обновления личных данных и настроек безопасности.

#### **Шаг 4: Предметы и Уроки (детализация)**
- **Задача:** Создать страницы для отображения содержимого конкретного предмета, темы и урока.
- **Компоненты:** Разработать карточки для тем и уроков, а также навигацию по ним.
- **API:** Реализовать хуки и запросы для получения детальной информации.

#### **Шаг 5: Профиль пользователя**
- **Задача:** Создать страницу `app/(main)/profile/page.tsx`.
- **Компоненты:** Разработать форму для редактирования данных пользователя.
- **API:** Реализовать запросы на обновление информации о пользователе.

#### **Шаг 6: Расширение UI-кита и состояния**
- **Задача:** Добавить в `components/ui` продвинутые компоненты: `AlertDialog`, `Sheet`, `Toast`, `Skeleton`.
- **Задача:** Внедрить `Zustand` для управления глобальным состоянием, например, состоянием авторизации или темой оформления.

---

## 3. Следующие шаги

1.  **Реализовать главную страницу с предметами:** Создать базовую страницу и компоненты для отображения курсов (**Шаг 2**).
2.  **Реализовать Личный кабинет (Dashboard):** Создать страницу и компоненты для отображения данных пользователя (**Шаг 3**).
3.  **Создать страницы для учебных материалов:** Реализовать отображение содержимого уроков (**Шаг 4**).
4.  **Расширить UI-кит:** Добавить недостающие UI-компоненты для ускорения разработки.

Эта структура и план позволят систематически развивать проект, сохраняя его модульность и масштабируемость.